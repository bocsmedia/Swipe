function Swipe(r,c){function y(){g=d.children;E=g.length;2>g.length&&(c.continuous=!1);p.transitions&&(c.continuous&&3>g.length)&&(d.appendChild(g[0].cloneNode(!0)),d.appendChild(d.children[1].cloneNode(!0)),g=d.children);m=Array(g.length);e=r.getBoundingClientRect().width||r.offsetWidth;d.style.width=g.length*e+"px";for(var b=g.length;b--;){var q=g[b];q.style.width=e+"px";q.setAttribute("data-index",b);p.transitions&&(q.style.left=b*-e+"px",k(b,a>b?-e:a<b?e:0,0))}c.continuous&&p.transitions&&(k(f(a-
1),-e,0),k(f(a+1),e,0));p.transitions||(d.style.left=a*-e+"px");C(a,g);r.style.visibility="visible"}function z(){c.continuous?x(a+1):a<g.length-1&&x(a+1)}function f(b){return(g.length+b%g.length)%g.length}function x(b,q){if(a!=b){if(p.transitions){var d=Math.abs(a-b)/(a-b);if(c.continuous){var h=d,d=-m[f(b)]/e;d!==h&&(b=-d*g.length+b)}for(h=Math.abs(a-b)-1;h--;)k(f((b>a?b:a)-h-1),e*d,0);b=f(b);k(a,e*d,q||n);k(b,0,q||n);c.continuous&&k(f(b-d),-(e*d),0)}else b=f(b),I(a*-e,b*-e,q||n);a=b;C(a,g);v(c.callback&&
c.callback(a,g[a]))}}function k(b,a,c){s(b,a,c);m[b]=a}function s(b,a,c){if(b=(b=g[b])&&b.style)b.webkitTransitionDuration=b.MozTransitionDuration=b.msTransitionDuration=b.OTransitionDuration=b.transitionDuration=c+"ms",b.webkitTransform="translate("+a+"px,0)translateZ(0)",b.msTransform=b.MozTransform=b.OTransform="translateX("+a+"px)"}function I(b,e,f){if(f)var h=+new Date,k=setInterval(function(){var l=+new Date-h;l>f?(d.style.left=e+"px",t&&(A=setTimeout(z,t)),c.transitionEnd&&c.transitionEnd.call(event,
a,g[a]),clearInterval(k)):d.style.left=(e-b)*(Math.floor(100*(l/f))/100)+b+"px"},4);else d.style.left=e+"px"}function C(b,a){for(var c=a.length;c--;)c===f(b)||c===f(b-1)||c===f(b+1)?a[c].style.visibility="visible":a[c].style.visibility="hidden"}function u(){t=0;clearTimeout(A)}var J=function(){},v=function(b){setTimeout(b||J,0)},p={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(b){var a=["transitionProperty",
"WebkitTransition","MozTransition","OTransition","msTransition"],c;for(c in a)if(void 0!==b.style[a[c]])return!0;return!1}(document.createElement("swipe"))};if(r){var d=r.children[0],g,m,e,E;c=c||{};var a=parseInt(c.startSlide,10)||0,n=c.speed||300;c.continuous=void 0!==c.continuous?c.continuous:!0;c.pastSlideEnd=void 0!==c.pastSlideEnd?c.pastSlideEnd:null;c.pastSlideStart=void 0!==c.pastSlideStart?c.pastSlideStart:null;c.pastResistance=c.pastResistance||100;var B=!1,t=c.auto||0,A,F,G,H,h,D,w,l={handleEvent:function(a){switch(a.type){case "touchstart":this.start(a);
break;case "touchmove":this.move(a);break;case "touchend":v(this.end(a));break;case "webkitTransitionEnd":case "msTransitionEnd":case "oTransitionEnd":case "otransitionend":case "transitionend":v(this.transitionEnd(a));break;case "resize":v(y.call())}c.stopPropagation&&a.stopPropagation()},start:function(a){a=a.touches[0];F=a.pageX;G=a.pageY;H=+new Date;D=h=w=void 0;d.addEventListener("touchmove",this,!1);d.addEventListener("touchend",this,!1)},move:function(b){if(!(1<b.touches.length||b.scale&&1!==
b.scale)){c.disableScroll&&b.preventDefault();var d=b.touches[0];h=d.pageX-F;D=d.pageY-G;"undefined"==typeof w&&(w=!!(w||Math.abs(h)<Math.abs(D)));w||B||(b.preventDefault(),u(),c.continuous?(s(f(a-1),h+m[f(a-1)],0),s(a,h+m[a],0),s(f(a+1),h+m[f(a+1)],0)):(h/=!a&&0<h||a==g.length-1&&0>h?Math.abs(h)/e+1:1,s(a-1,h+m[a-1],0),s(a,h+m[a],0),s(a+1,h+m[a+1],0),!a&&(h>c.pastResistance&&c.pastSlideStart)&&(v(c.pastSlideStart),c.pastSlideStart=null),a==g.length-1&&(h<-1*c.pastResistance&&c.pastSlideEnd)&&(v(c.pastSlideEnd),
c.pastSlideEnd=null)))}},end:function(b){b=250>Number(+new Date-H)&&20<Math.abs(h)||Math.abs(h)>e/2;var q=!a&&0<h||a==g.length-1&&0>h;c.continuous&&(q=!1);var p=0>h;w||B||(b&&!q?(p?(c.continuous?(k(f(a-1),-e,0),k(f(a+2),e,0)):k(a-1,-e,0),k(a,m[a]-e,n),k(f(a+1),m[f(a+1)]-e,n),a=f(a+1)):(c.continuous?(k(f(a+1),e,0),k(f(a-2),-e,0)):k(a+1,e,0),k(a,m[a]+e,n),k(f(a-1),m[f(a-1)]+e,n),a=f(a-1)),C(a,g),c.callback&&c.callback(a,g[a])):c.continuous?(k(f(a-1),-e,n),k(a,0,n),k(f(a+1),e,n)):(k(a-1,-e,n),k(a,0,
n),k(a+1,e,n)));d.removeEventListener("touchmove",l,!1);d.removeEventListener("touchend",l,!1)},transitionEnd:function(b){parseInt(b.target.getAttribute("data-index"),10)==a&&(t&&(A=setTimeout(z,t)),c.transitionEnd&&c.transitionEnd.call(b,a,g[a]))}};y();t&&(A=setTimeout(z,t));p.addEventListener?(p.touch&&d.addEventListener("touchstart",l,!1),p.transitions&&(d.addEventListener("webkitTransitionEnd",l,!1),d.addEventListener("msTransitionEnd",l,!1),d.addEventListener("oTransitionEnd",l,!1),d.addEventListener("otransitionend",
l,!1),d.addEventListener("transitionend",l,!1)),window.addEventListener("resize",l,!1)):window.onresize=function(){y()};return{setup:function(){y()},slide:function(a,c){u();x(a,c)},prev:function(){u();c.continuous?x(a-1):a&&x(a-1)},next:function(){u();z()},freeze:function(){u();B=!0},unfreeze:function(){u();B=!1},getPos:function(){return a},getNumSlides:function(){return E},kill:function(){u();d.style.width="auto";d.style.left=0;for(var a=g.length;a--;){var c=g[a];c.style.width="100%";c.style.left=
0;p.transitions&&s(a,0,0)}p.addEventListener?(d.removeEventListener("touchstart",l,!1),d.removeEventListener("webkitTransitionEnd",l,!1),d.removeEventListener("msTransitionEnd",l,!1),d.removeEventListener("oTransitionEnd",l,!1),d.removeEventListener("otransitionend",l,!1),d.removeEventListener("transitionend",l,!1),window.removeEventListener("resize",l,!1)):window.onresize=null}}}}
(window.jQuery||window.Zepto)&&function(r){r.fn.Swipe=function(c){return this.each(function(){r(this).data("Swipe",new Swipe(r(this)[0],c))})}}(window.jQuery||window.Zepto);